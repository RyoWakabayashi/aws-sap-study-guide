# 実践問題集

## 目次

1. [コンピューティング問題](#コンピューティング問題)

2. [ストレージ問題](#ストレージ問題)

3. [データベース問題](#データベース問題)

4. [ネットワーキング問題](#ネットワーキング問題)

5. [セキュリティ問題](#セキュリティ問題)

6. [アーキテクチャ設計問題](#アーキテクチャ設計問題)

---

## コンピューティング問題

### 問題1: Auto Scaling最適化

**シナリオ**:
Webアプリケーションが平日の9-18時に高負荷、それ以外は低負荷となる予測可能なパターンを示しています。現在のAuto Scalingは反応的スケーリングのみを使用しており、スケールアウト時にユーザーエクスペリエンスが低下しています。

**質問**:
最も効果的な解決策はどれですか？

A) Target Tracking Scalingのターゲット値を下げる
B) Predictive Scalingを有効にする
C) Step Scalingポリシーを追加する
D) Scheduled Scalingを設定する

**解答**: B) Predictive Scalingを有効にする

**解説**:

予測可能なパターンがある場合、Predictive Scalingが最も効果的です。機械学習を使用して過去のパターンを分析し、需要を予測してプロアクティブにスケーリングします。これにより、負荷増加前にインスタンスを準備でき、ユーザーエクスペリエンスが向上します

---

### 問題2: スポットインスタンス活用

**シナリオ**:
バッチ処理ワークロードでコスト削減を図りたいが、処理の中断は許容できません。現在はオンデマンドインスタンスを使用しており、月額$10,000のコストがかかっています。

**質問**:
最適なアプローチはどれですか？

A) 全てスポットインスタンスに変更
B) スポットフリートで複数のインスタンスタイプを指定
C) リザーブドインスタンスに変更
D) オンデマンド50% + スポット50%の混合構成

**解答**: B) スポットフリートで複数のインスタンスタイプを指定

**解説**:
スポットフリートで複数のインスタンスタイプとAZを指定することで、中断リスクを分散できます。diversified割り当て戦略により、異なる容量プールから調達し、一部が中断されても他で継続できます

---

## ストレージ問題

### 問題3: S3コスト最適化

**シナリオ**:
ログファイルを保存するS3バケットがあり、以下の特徴があります：

- 最初の30日間は頻繁にアクセス
- 30-90日は月1回程度アクセス
- 90日以降は年1回程度アクセス
- 7年間保存が必要

**質問**:
最もコスト効率的なライフサイクル設定はどれですか？

A) 30日後にIA、90日後にGlacier、2年後にDeep Archive
B) 30日後にIA、90日後にGlacier Instant Retrieval、1年後にDeep Archive
C) 即座にIntelligent-Tiering
D) 30日後にGlacier、90日後にDeep Archive

**解答**: A) 30日後にIA、90日後にGlacier、2年後にDeep Archive

**解説**:
アクセスパターンに基づいた段階的な移行が最適です。頻繁アクセス期間後にIA、低頻度アクセス期間後にGlacier、長期保存期間でDeep Archiveに移行することで、コストと取得時間のバランスが取れます

---

### 問題4: EBS性能最適化

**シナリオ**:
データベースサーバーで以下の要件があります：

- 一貫して高いIOPS性能が必要
- 現在gp2ボリューム（1TB）を使用
- 平均IOPS使用量: 8,000
- 最大IOPS使用量: 12,000

**質問**:
最適な解決策はどれですか？

A) gp3に変更し、IOPSを12,000に設定
B) io2に変更し、IOPSを12,000に設定
C) 複数のgp2ボリュームをRAID構成
D) gp2のサイズを4TBに拡張

**解答**: A) gp3に変更し、IOPSを12,000に設定

**解説**:
gp3は基準性能3,000 IOPSから最大16,000 IOPSまで独立して調整可能で、コスト効率が良いです。io2は同等性能でより高コスト、RAID構成は複雑性が増加、gp2拡張は不要な容量増加となります

---

## データベース問題

### 問題5: Aurora Global Database

**シナリオ**:
グローバル企業が以下の要件でデータベースを設計しています：

- プライマリリージョン: us-east-1
- セカンダリリージョン: eu-west-1, ap-northeast-1
- 読み取りワークロードの地理的分散
- 災害復旧時のRTO < 1分

**質問**:
最適な構成はどれですか？

A) Aurora Global Database + 各リージョンにRead Replica
B) DynamoDB Global Tables
C) RDS Multi-AZ + Cross-Region Read Replica
D) Aurora + DMS継続レプリケーション

**解答**: A) Aurora Global Database + 各リージョンにRead Replica

**解説**:
Aurora Global Databaseは1秒未満のレプリケーション遅延で、各セカンダリリージョンでRead Replicaを追加できます。災害復旧時は1分未満でプライマリを切り替え可能で、要件を満たします

---

### 問題6: DynamoDB設計

**シナリオ**:
IoTデバイスからのデータを保存するDynamoDBテーブルで、以下のアクセスパターンがあります：

- デバイスID + タイムスタンプでの書き込み
- デバイスID + 時間範囲での読み取り
- 全デバイスの最新ステータス取得

**質問**:
最適なキー設計はどれですか？

A) PK: DeviceID, SK: Timestamp
B) PK: DeviceID + Date, SK: Timestamp
C) PK: Timestamp, SK: DeviceID
D) PK: DeviceID, SK: Status

**解答**: B) PK: DeviceID + Date, SK: Timestamp

**解説**:
DeviceID + Dateをパーティションキーにすることで、書き込みを日付別に分散でき、ホットパーティションを回避できます。時間範囲クエリも効率的に実行可能で、GSIで最新ステータス取得も対応できます

---

## ネットワーキング問題

### 問題7: VPC設計

**シナリオ**:
3層Webアプリケーションを3つのAZに配置し、以下の要件があります：

- Web層: インターネットアクセス必要
- App層: Web層からのみアクセス
- DB層: App層からのみアクセス
- 各層で冗長性確保

**質問**:
最適なサブネット設計はどれですか？

A) パブリック×3、プライベート×6
B) パブリック×3、プライベート×3
C) パブリック×1、プライベート×6
D) パブリック×6、プライベート×3

**解答**: A) パブリック×3、プライベート×6

**解説**:
各AZにパブリックサブネット（Web層）×1、プライベートサブネット（App層、DB層）×2が必要です。合計でパブリック×3、プライベート×6となり、適切な分離と冗長性を確保できます

---

### 問題8: CloudFront最適化

**シナリオ**:
グローバルなWebアプリケーションで以下の課題があります：

- 静的コンテンツの配信が遅い
- API呼び出しのレイテンシが高い
- 地域によってパフォーマンスが大きく異なる

**質問**:
最も効果的な解決策はどれですか？

A) CloudFrontで静的コンテンツのみキャッシュ
B) CloudFront + API Gatewayエッジ最適化
C) CloudFront + 複数オリジンでの地理的ルーティング
D) Global Acceleratorの使用

**解答**: C) CloudFront + 複数オリジンでの地理的ルーティング

**解説**:
複数リージョンにオリジンを配置し、CloudFrontで地理的ルーティングを設定することで、静的コンテンツとAPIの両方で最適なパフォーマンスを実現できます

---

## セキュリティ問題

### 問題9: IAM設計

**シナリオ**:
開発チームが以下の要件でAWSリソースにアクセスする必要があります：

- 開発環境のみアクセス可能
- 本番環境は読み取り専用
- 特定の時間帯のみアクセス許可
- MFA必須

**質問**:
最適なIAMポリシー設計はどれですか？

A) 環境別IAMユーザー + 時間制限ポリシー
B) IAMロール + 条件付きポリシー + MFA
C) IAMグループ + リソースベースポリシー
D) Permission Boundary + インラインポリシー

**解答**: B) IAMロール + 条件付きポリシー + MFA

**解説**:
IAMロールでAssumeRoleを使用し、条件でMFA、時間帯、環境を制限するポリシーが最も安全で管理しやすいです。一時的な認証情報を使用し、きめ細かい制御が可能です

---

### 問題10: データ暗号化

**シナリオ**:
金融機関で以下の暗号化要件があります：

- 保存時暗号化: 顧客管理キー使用
- 転送時暗号化: 必須
- キーローテーション: 年1回
- 監査ログ: 全キー使用を記録

**質問**:
最適な暗号化戦略はどれですか？

A) KMS Customer Managed Keys + CloudTrail
B) CloudHSM + 独自キー管理
C) S3 SSE-C + 手動ローテーション
D) KMS AWS Managed Keys + Config

**解答**: A) KMS Customer Managed Keys + CloudTrail

**解説**:
KMS Customer Managed Keysで顧客制御を確保し、自動ローテーション設定、CloudTrailで全キー使用を監査できます。金融機関の要件を満たしつつ、運用負荷を最小化できます

---

## アーキテクチャ設計問題

### 問題11: マイクロサービス設計

**シナリオ**:
モノリシックなEコマースアプリケーションをマイクロサービスに移行します。現在の機能：

- ユーザー管理
- 商品カタログ
- 注文処理
- 決済処理
- 在庫管理

**質問**:
最初に分離すべきサービスはどれですか？

A) ユーザー管理サービス
B) 決済処理サービス
C) 商品カタログサービス
D) 注文処理サービス

**解答**: B) 決済処理サービス

**解説**:
決済処理は独立性が高く、セキュリティ要件が厳しく、外部システムとの統合が多いため、最初に分離するのに適しています。また、PCI DSS準拠の観点からも分離が推奨されます

---

### 問題12: 災害復旧設計

**シナリオ**:
ミッションクリティカルなアプリケーションで以下の要件があります：

- RTO: 30分以内
- RPO: 5分以内
- 年間予算: $200,000
- 地理的に離れた場所での復旧

**質問**:
最適な災害復旧戦略はどれですか？

A) Backup & Restore
B) Pilot Light
C) Warm Standby
D) Multi-Site Active

**解答**: C) Warm Standby

**解説**:
RTO 30分、RPO 5分の要件を満たすには、Warm Standbyが最適です。縮小版の環境を常時稼働させ、障害時に迅速にスケールアップできます。予算内で要件を満たせます

---

### 問題13: データレイク設計

**シナリオ**:
大企業が以下のデータソースからデータレイクを構築します：

- Webログ（リアルタイム）
- データベースエクスポート（日次）
- IoTセンサーデータ（ストリーミング）
- ファイルアップロード（不定期）

**質問**:
最適なデータ取り込みアーキテクチャはどれですか？

A) 全てKinesis Data Firehose経由
B) データソース別の取り込み方法を使用
C) Lambda + S3の組み合わせ
D) AWS Glue ETLで統一処理

**解答**: B) データソース別の取り込み方法を使用

**解説**:
各データソースの特性に応じた最適な取り込み方法を選択すべきです：

- Webログ: Kinesis Data Firehose
- DBエクスポート: AWS DMS
- IoTデータ: IoT Core + Kinesis
- ファイル: S3 + Lambda

---

### 問題14: コスト最適化

**シナリオ**:
開発・テスト環境で以下の使用パターンがあります：

- 平日9-18時のみ使用
- 週末は完全停止
- 月末に集中的な負荷テスト
- 年間コスト: $150,000

**質問**:
最も効果的なコスト削減策はどれですか？

A) 全てスポットインスタンスに変更
B) リザーブドインスタンス購入
C) スケジュールベースのAuto Scaling
D) Savings Plans購入

**解答**: C) スケジュールベースのAuto Scaling

**解説**:
開発・テスト環境の予測可能な使用パターンに対して、スケジュールベースのAuto Scalingが最も効果的です。使用しない時間帯にインスタンスを停止することで、大幅なコスト削減が可能です

---

### 問題15: セキュリティアーキテクチャ

**シナリオ**:
金融サービス企業が以下のセキュリティ要件を満たす必要があります：

- 多層防御
- ゼロトラストアーキテクチャ
- リアルタイム脅威検知
- コンプライアンス監査対応

**質問**:
最適なセキュリティサービス組み合わせはどれですか？

A) WAF + Shield + GuardDuty + Security Hub
B) IAM + KMS + CloudTrail + Config
C) VPC + Security Groups + NACLs + Inspector
D) 上記全ての組み合わせ

**解答**: D) 上記全ての組み合わせ

**解説**:
金融サービスの厳格な要件を満たすには、包括的なセキュリティアプローチが必要です：

- ネットワーク層: WAF, Shield, VPC
- アプリケーション層: Security Groups, NACLs
- データ層: KMS, 暗号化
- 監視・検知: GuardDuty, Security Hub, CloudTrail
- ガバナンス: IAM, Config

---

## 解答のポイント

### 問題解決アプローチ

1. **要件の明確化**: RTO/RPO、コスト、性能要件を特定

2. **制約の理解**: 技術的制約、ビジネス制約を考慮

3. **トレードオフの評価**: コスト vs 性能、複雑性 vs 機能性

4. **ベストプラクティスの適用**: Well-Architected Frameworkの原則

5. **将来性の考慮**: スケーラビリティ、拡張性

### 頻出パターン

- **コスト最適化**: 使用パターンに応じた料金モデル選択
- **高可用性**: Multi-AZ、Auto Scaling、ヘルスチェック
- **セキュリティ**: 最小権限、暗号化、監視
- **パフォーマンス**: 適切なサービス選択、キャッシュ活用
- **運用効率**: 自動化、監視、ログ管理

---

*これらの問題を通じて、実際の試験で求められる思考プロセスと知識を身につけることができます。各問題の解説を理解し、類似のシナリオに応用できるよう練習してください。*
